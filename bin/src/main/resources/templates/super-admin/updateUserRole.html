<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layouts/new_app :: ~{html} (content = ~{::content})}">

<body>
	<div th:fragment="content">
	<div class="card rounded-3 shadow-sm">
	    <div class="card-body  p-4">
			<div th:if="${successMessage}" class="alert alert-success" role="alert">
			    <span th:text="${successMessage}"></span>
			</div>

			<div th:if="${errorMessage}" class="alert alert-danger" role="alert">
			    <span th:text="${errorMessage}"></span>
			</div>

			<ul class="list-group">
			    <th:block th:each="user : ${users}">
			        <li class="list-group-item d-flex justify-content-between align-items-center">
			            <div>
			                <strong th:text="${user.username}">ชื่อสมาชิก</strong><br>
			                <span class="text-muted">สถานะปัจจุบัน: 
			                    <span th:text="${user.role.displayRole}"></span>
			                </span>
			            </div>

			            <form th:action="@{/admin/users/updateRole}" method="post">
			                <input type="hidden" name="userId" th:value="${user.id}"/>
			                <div class="input-group">
			                    <select name="role" class="form-select">
			                        <option th:each="role : ${roles}"
			                                th:value="${role}"
			                                th:selected="${role == user.role}"
			                                th:text="${role.displayRole}">
			                        </option>
			                    </select>
			                    <button type="submit" class="btn btn-primary btn-sm">บันทึก</button>
			                </div>
			            </form>
			        </li>
			    </th:block>

			    <li class="list-group-item text-center text-muted p-5" 
			        th:if="${#lists.isEmpty(users)}">ยังไม่มีสมาชิก</li>
			</ul>

	    </div>
	</div>
	</div>
</body>
</html>